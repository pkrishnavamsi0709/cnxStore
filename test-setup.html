<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Adobe AEM Integration Test</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .test-section {
        margin: 20px 0;
        padding: 15px;
        border: 1px solid #ccc;
        border-radius: 5px;
      }
      .success {
        background-color: #d4edda;
        border-color: #c3e6cb;
      }
      .error {
        background-color: #f8d7da;
        border-color: #f5c6cb;
      }
      .loading {
        background-color: #fff3cd;
        border-color: #ffeaa7;
      }
      pre {
        background: #f8f9fa;
        padding: 10px;
        border-radius: 3px;
        overflow-x: auto;
      }
      button {
        padding: 10px 20px;
        margin: 5px;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 3px;
        cursor: pointer;
      }
      button:hover {
        background: #0056b3;
      }
    </style>
  </head>
  <body>
    <h1>üîß Adobe AEM Integration Test</h1>

    <div class="test-section">
      <h2>üìã Test Status</h2>
      <div id="status">Ready to test...</div>
    </div>

    <div class="test-section">
      <h2>üß™ Manual Tests</h2>
      <button onclick="testProxy()">Test Proxy Server</button>
      <button onclick="testHomePage()">Test Home Page Data</button>
      <button onclick="testOffersPage()">Test Offers Page Data</button>
      <button onclick="testAboutPage()">Test About Page Data</button>
      <button onclick="testAll()">Test All</button>
    </div>

    <div class="test-section">
      <h2>üìä Results</h2>
      <div id="results"></div>
    </div>

    <div class="test-section">
      <h2>üîó Quick Links</h2>
      <p>
        <a href="http://localhost:3000" target="_blank"
          >React App (Port 3000)</a
        >
      </p>
      <p>
        <a href="http://localhost:3001/test" target="_blank"
          >Proxy Test Endpoint (Port 3001)</a
        >
      </p>
    </div>

    <script>
      const resultsDiv = document.getElementById("results");
      const statusDiv = document.getElementById("status");

      function updateStatus(message, type = "info") {
        statusDiv.innerHTML = `<span class="${type}">${message}</span>`;
      }

      function addResult(title, content, type = "success") {
        const div = document.createElement("div");
        div.className = `test-section ${type}`;
        div.innerHTML = `
                <h3>${title}</h3>
                <div>${content}</div>
            `;
        resultsDiv.appendChild(div);
      }

      async function testProxy() {
        try {
          updateStatus("Testing proxy server...", "loading");

          const response = await fetch("http://localhost:3001/test");
          const data = await response.text();

          if (response.ok) {
            addResult(
              "‚úÖ Proxy Server Test",
              `Status: ${response.status}<br>Response: ${data}`
            );
            updateStatus("Proxy server is working!", "success");
          } else {
            addResult(
              "‚ùå Proxy Server Test",
              `Status: ${response.status}<br>Error: ${data}`,
              "error"
            );
            updateStatus("Proxy server test failed", "error");
          }
        } catch (error) {
          addResult("‚ùå Proxy Server Test", `Error: ${error.message}`, "error");
          updateStatus("Proxy server test failed", "error");
        }
      }

      async function testHomePage() {
        try {
          updateStatus("Testing Home Page data...", "loading");

          const response = await fetch(
            "http://localhost:3001/api/content/concentrixpartnersandboxprogram/us/en/home-page.model.json"
          );
          const data = await response.json();

          if (response.ok) {
            addResult(
              "‚úÖ Home Page Test",
              `
                        Status: ${response.status}<br>
                        Title: ${data.title}<br>
                        Type: ${data[":type"]}<br>
                        <details>
                            <summary>View Full Data</summary>
                            <pre>${JSON.stringify(data, null, 2)}</pre>
                        </details>
                    `
            );
            updateStatus("Home page data loaded successfully!", "success");
          } else {
            addResult(
              "‚ùå Home Page Test",
              `Status: ${response.status}`,
              "error"
            );
            updateStatus("Home page test failed", "error");
          }
        } catch (error) {
          addResult("‚ùå Home Page Test", `Error: ${error.message}`, "error");
          updateStatus("Home page test failed", "error");
        }
      }

      async function testOffersPage() {
        try {
          updateStatus("Testing Offers Page data...", "loading");

          const response = await fetch(
            "http://localhost:3001/api/content/concentrixpartnersandboxprogram/us/en/offers-page.model.json"
          );
          const data = await response.json();

          if (response.ok) {
            addResult(
              "‚úÖ Offers Page Test",
              `
                        Status: ${response.status}<br>
                        Title: ${data.title}<br>
                        Type: ${data[":type"]}<br>
                        <details>
                            <summary>View Full Data</summary>
                            <pre>${JSON.stringify(data, null, 2)}</pre>
                        </details>
                    `
            );
            updateStatus("Offers page data loaded successfully!", "success");
          } else {
            addResult(
              "‚ùå Offers Page Test",
              `Status: ${response.status}`,
              "error"
            );
            updateStatus("Offers page test failed", "error");
          }
        } catch (error) {
          addResult("‚ùå Offers Page Test", `Error: ${error.message}`, "error");
          updateStatus("Offers page test failed", "error");
        }
      }

      async function testAboutPage() {
        try {
          updateStatus("Testing About Page data...", "loading");

          const response = await fetch(
            "http://localhost:3001/api/content/concentrixpartnersandboxprogram/us/en/about-page.model.json"
          );
          const data = await response.json();

          if (response.ok) {
            addResult(
              "‚úÖ About Page Test",
              `
                        Status: ${response.status}<br>
                        Title: ${data.title}<br>
                        Type: ${data[":type"]}<br>
                        <details>
                            <summary>View Full Data</summary>
                            <pre>${JSON.stringify(data, null, 2)}</pre>
                        </details>
                    `
            );
            updateStatus("About page data loaded successfully!", "success");
          } else {
            addResult(
              "‚ùå About Page Test",
              `Status: ${response.status}`,
              "error"
            );
            updateStatus("About page test failed", "error");
          }
        } catch (error) {
          addResult("‚ùå About Page Test", `Error: ${error.message}`, "error");
          updateStatus("About page test failed", "error");
        }
      }

      async function testAll() {
        resultsDiv.innerHTML = ""; // Clear previous results
        await testProxy();
        await new Promise((resolve) => setTimeout(resolve, 1000));
        await testHomePage();
        await new Promise((resolve) => setTimeout(resolve, 1000));
        await testOffersPage();
        await new Promise((resolve) => setTimeout(resolve, 1000));
        await testAboutPage();
        updateStatus("All tests completed!", "success");
      }

      // Auto-run tests on page load
      window.onload = () => {
        updateStatus(
          'Ready to test. Click "Test All" to run all tests.',
          "info"
        );
      };
    </script>
  </body>
</html>
